<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                template="/templates/commonlayout.xhtml">

    
    <ui:define name="title">Recruiter #{messages.page}</ui:define>
    <ui:define name="content">
    <f:event listener="#{jobView.loadCompetences(messages.code)}" type="preRenderView" />    
        <h:form>
            <h:panelGrid columns="9" cellpadding="5">
                <h:outputLabel for="menu" value="Competences:" />
                <p:selectCheckboxMenu id="menu" value="#{jobView.selectedCompetences}" label="Competences"
                                      filter="true" required="true" filterMatchMode="startsWith" panelStyle="width:250px">
                    <f:selectItems value="#{jobView.competences}" />
                </p:selectCheckboxMenu>
                
                <h:outputLabel for="namesearch" value="Name: " />
                <p:inputText id="namesearch" value="#{jobView.nameSearch}" required="false" label="Name" />
                
                <p:outputLabel for="startdate" value="Start date:" />
                <p:calendar id="startdate" value="#{jobView.startDate}">
                    <p:ajax event="dateSelect" listener="#{jobView.onDateSelect}" />
                </p:calendar>
                
                <p:outputLabel for="enddate" value="End date:" />
                <p:calendar id="enddate" value="#{jobView.endDate}">
                    <p:ajax event="dateSelect" listener="#{jobView.onDateSelect}" />
                </p:calendar>


                <p:commandButton value="Submit" update=":applicationstable" actionListener="#{jobView.loadQueriedApplications}"/>
            </h:panelGrid>
        </h:form>
    
        <p:dataTable  id="applicationstable" var="appl" value="#{jobView.queriedApplications}" style="margin-bottom:40px">
            <f:facet name="header">
                Applicants
            </f:facet>
            <p:column headerText="Firstname" sortBy="#{appl.firstname}">
                <h:outputText value="#{appl.firstname}" />
            </p:column>

            <p:column headerText="Lastname" sortBy="#{appl.lastname}">
                <h:outputText value="#{appl.lastname}" />
            </p:column>

            <p:column headerText="Registration date" sortBy="#{appl.registrationDate}">
                <h:outputText value="#{appl.registrationDate}" />
            </p:column>
        </p:dataTable>
        
    </ui:define>
</ui:composition>